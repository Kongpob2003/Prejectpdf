<div class="home-container">
  <!-- Sidebar -->
  <aside class="sidebar minimal">
    <div class="logo-box">
      <span class="material-icons logo-icon">picture_as_pdf</span>
      <span class="logo-text">My PDF</span>
    </div>

    <button class="back-btn" routerLink="/home">
      <span class="material-icons">arrow_back</span>
      กลับหน้าหลัก
    </button>
  </aside>
  <!-- Content -->
<!-- Content -->
  <main class="content center-content">
    <div class="calendar-card">
      <!-- Header with Month/Year Selector -->
      <div class="calendar-header">
        <h2>ปฏิทินเอกสาร</h2>
        
        <div class="month-selector">
          <button class="nav-btn" (click)="previousMonth()">
            <span class="material-icons">chevron_left</span>
          </button>

          <div class="month-year-picker">
            <select [(ngModel)]="currentMonth" (change)="onMonthChange()">
              <option *ngFor="let month of monthNames; let i = index" [value]="i">
                {{ month }}
              </option>
            </select>

            <select [(ngModel)]="currentYear" (change)="onMonthChange()">
              <option *ngFor="let yr of years" [value]="yr">
                {{ yr + 543 }}
              </option>
            </select>
          </div>

          <button class="nav-btn" (click)="nextMonth()">
            <span class="material-icons">chevron_right</span>
          </button>

          <button class="today-btn" (click)="goToToday()">
            วันนี้
          </button>
        </div>
      </div>

      <!-- Summary -->
      <div class="calendar-summary">
        <!-- Admin -->
        <div class="summary-box admin" *ngIf="role === 'admin'">
          <span class="material-icons">upload_file</span>
          <div>
            <p class="number">{{ totalSent }}</p>
            <span>เอกสารที่ถูกส่งทั้งหมด</span>
          </div>
        </div>

        <!-- User -->
        <div class="summary-box user" *ngIf="role === 'user'">
          <span class="material-icons">inbox</span>
          <div>
            <p class="number">{{ todayReceived }}</p>
            <span>เอกสารที่ส่งมาให้วันนี้</span>
          </div>
        </div>
      </div>

      <!-- Calendar Body -->
      <div class="calendar-body">
        <!-- Day Names -->
        <div class="calendar-grid">
          <div class="day-name" *ngFor="let d of days">
            {{ d }}
          </div>

          <!-- Calendar Days -->
          <div
            class="day-cell"
            *ngFor="let day of calendarDays"
            [class.today]="day.isToday"
            [class.has-doc]="day.documentCount > 0"
            [class.other-month]="!day.isCurrentMonth"
            (click)="onDayClick(day)"
          >
            <span class="date">{{ day.date }}</span>

            <span class="badge" *ngIf="day.documentCount > 0">
              {{ day.documentCount }}
            </span>
          </div>
        </div>
      </div>

      <!-- Legend -->
      <div class="calendar-legend">
        <div class="legend-item">
          <div class="legend-color today-color"></div>
          <span>วันนี้</span>
        </div>
        <div class="legend-item">
          <div class="legend-color has-doc-color"></div>
          <span>มีเอกสาร</span>
        </div>
      </div>
    </div>
  </main>
</div>
